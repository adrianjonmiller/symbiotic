{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./docs/app.js","webpack:///./docs/button.html","webpack:///./docs/plugin.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/promise-polyfill/src/finally.js","webpack:///./node_modules/promise-polyfill/src/index.js","webpack:///./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/template-polyfill/index.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///(webpack)/buildin/global.js","webpack:///./plugins/test.js","webpack:///./src/after-polyfill.js","webpack:///./src/data.js","webpack:///./src/descriptor.js","webpack:///./src/global.js","webpack:///./src/index.js","webpack:///./src/model.js","webpack:///./src/observe.js","webpack:///./src/textNode.js","webpack:///./src/utils.js","webpack:///./src/vnode.js","webpack:///./src/vnom.js","webpack:///./src/vstyle.js","webpack:///./src/vtext.js"],"names":["Symbiote","methods","data","test","func","on","state","props","class","style","backgroundColor","enter","console","log","ready","leave","setTimeout","emit","plugins","Plugin","attach","then","vnode","model","ctx","pluginVar","arr","forEach","item","hasOwnProperty","Object","defineProperty","configurable","enumerable","writable","value","after","argArr","Array","prototype","slice","call","arguments","docFrag","document","createDocumentFragment","argItem","isNode","Node","appendChild","createTextNode","String","parentNode","insertBefore","nextSibling","Element","CharacterData","DocumentType","Data","cb","watchers","val","newVal","oldVal","watcher","utils","nextFrame","Descriptor","node","computer","addWatcher","Utils","loop","key","get","set","update","writeable","isArray","concat","map","fn","bind","push","head","vdom","Symbiotic","config","global","el","$scope","getScope","findHead","createElement","boostrapTemplates","Promise","resolve","reject","start","readyState","addEventListener","t0","performance","now","Vnode","init","t1","polyfillStyle","createStyleNode","polyfillScript","innerText","innerHTML","window","undefined","Model","$node","$styleNode","events","firstChild","lastChild","next","prev","cloned","id","getAttribute","uid","show","textNodes","width","offsetWidth","height","offsetHeight","hover","prevState","states","tagName","nodeType","$event","append","prepend","find","findParent","extend","watch","setAttribute","toLowerCase","$template","getTemplateNode","removeProperty","removeAttribute","display","parent","updateState","updateStyles","assign","check","attributes","attribute","attrName","dashToCamelCase","nodeName","$attrValue","nodeValue","indexOf","replace","mustacheRegex","match","variable","refs","split","obj","store","index","length","debounce","camelCaseToDash","childNodes","$children","$child","child","getTextNode","$textNode","TextNode","list","vals","cloneNodes","ResizeObserver","entries","observer","entry","contentRect","left","top","observe","pos","p","event","useCapture","e","apply","k","$cloned","children","cloneNode","textNode","v","payload","bubbles","i","Proxy","result","dig","includes","name","Plugins","args","template","range","createRange","ref","trim","stringRef","frag","createContextualFragment","_update","values","styleString","prop","$clonedNode","content","found","object","context","handler","target","property","receiver","err","Reflect","descriptor","deleteProperty","originalContent","textContent","prefix","myStr","myString","g","toUpperCase","styleNode","type","frame","executedFunction","cancelAnimationFrame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","o","keys","res","reduce","vnom","method","attributeValue","charAt","substring","setStates","body","querySelector","stateName","newStates","methodKey","getState","newStateName","oldState","newState","$on","Vnom","Vtext","eventName","attrValue","Vstyle","styles","updateStyleNode","Global","$originalContent","filter","self","contents","$lastNode","$newNode"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;AClFA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,eAAJ,CAAa;AACTC,aAAS;AACL,gBAAQ;AACJC,kBAAM;AACFC,sBAAM;AADJ,aADF;AAIJF,qBAAS;AACLG,sBAAM,gBAAY;AACd,2BAAO,SAAP;AACH;AAHI,aAJL;AASJ,qBAAS;AACLC,oBAAI;AACA,8BAAU,kBAAY;AAClB,6BAAKC,KAAL,GAAa,SAAb;AACH;AAHD,iBADC;AAMLC,uBAAO;AACHC,2BAAO,UADJ;AAEHC,2BAAO;AACHC,yCAAiB;AADd;AAFJ,iBANF;AAYLC,uBAAO,iBAAY;AACfC,4BAAQC,GAAR,CAAY,KAAKT,IAAL,EAAZ;AACH,iBAdI;AAeLU,uBAAO,iBAAY;AACf;AACH,iBAjBI;AAkBLC,uBAAO,iBAAY;AACf;AACH;AApBI,aATL;AA+BJ,uBAAW;AACPV,oBAAI;AACA,+BAAW,OADX;AAEA,6BAAS;AAFT,iBADG;AAKPE,uBAAO;AACHC,2BAAO,SADJ;AAEHC,2BAAO;AACHC,yCAAiB;AADd;AAFJ,iBALA;AAWPC,uBAAO,iBAAY;AAAA;;AACfK,+BAAW,YAAM;AACb,8BAAKC,IAAL,CAAU,SAAV;AACH,qBAFD,EAEG,IAFH;AAGH;AAfM;AA/BP;AADH,KADA;AAoDTC,aAAS,CAACC,cAAD;AApDA,CAAb,EAqDGC,MArDH,GAqDYC,IArDZ,CAqDiB,UAAUC,KAAV,EAAiB,CACjC,CAtDD,E;;;;;;;;;;;ACLA,2C;;;;;;;;;;;;;;;;;;;;aCCE,gBAAaC,KAAb,EAAoB;AAClB;;AADkB;AAEnB,C;;;;;;;;;;;;;;;;;;;;;;;;;ACHH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;;ACvLtC;AAAA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;;;;;;;;;;;;;;ACnBA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA,aAAa,SAAS;AACtB;AACA,aAAa,kBAAkB;AAC/B;AACA,aAAa,kBAAkB;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;;;;;;;;;;;;;;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,EAAE;AACjB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA,mBAAmB,EAAE;AACrB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,EAAE;AACrB,mBAAmB,EAAE;AACrB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,EAAE;AACrB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,EAAE;AACrB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B,mBAAmB,EAAE;AACrB,qBAAqB;AACrB;AACA;AACA,iCAAiC,YAAY;AAC7C,mDAAmD,gBAAgB;AACnE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gCAAgC,6BAA6B,EAAE,aAAa;AAC5G,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,qDAAqD,mCAAmC,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gBAAgB;AAC/B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA,6CAA6C,gBAAgB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B,WAAW,UAAU;AACrB,aAAa;AACb;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,6CAA6C,yBAAyB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,kCAAkC,iEAAiE;AACnG;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,8CAA8C;AAC9C,CAAC;AACD;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,2CAA2C;AAC7E;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,eAAe,uBAAuB;AACtC;AACA,eAAe,yBAAyB;AACxC;AACA,eAAe,eAAe;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;;AC/5BA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;;ACzLD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,cAAc;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./docs/app.js\");\n","import Symbiote from '../src/index.js';\nimport Button from './button.html';\nimport Plugin from 'Plugins/test'\nimport Plugin2 from './plugin';\n\nnew Symbiote({\n    methods: {\n        'body': {\n            data: {\n                test: 'success'\n            },\n            methods: {\n                func: function () {\n                    return 'success'\n                }\n            },\n            'start': {\n                on: {\n                    '$click': function () {\n                        this.state = 'loading'\n                    }\n                },\n                props: {\n                    class: 'starting',\n                    style: {\n                        backgroundColor: 'red'\n                    }\n                },\n                enter: function () {\n                    console.log(this.func())\n                },\n                ready: function () {\n                    // console.log('ready')\n                },\n                leave: function () {\n                    // console.log('leave')\n                }\n            },\n            'loading': {\n                on: {\n                    'success': 'start',\n                    'error': 'error'\n                },\n                props: {\n                    class: 'loading',\n                    style: {\n                        backgroundColor: 'blue'\n                    }\n                },\n                enter: function () { \n                    setTimeout(() => {\n                        this.emit('success');\n                    }, 3000)\n                }\n            }\n        }\n    },\n    plugins: [Plugin]\n}).attach().then(function (vnode) {\n});","module.exports = \"<button>Button</button>\";","export default class {\n  constructor (model) {\n    // console.log(model);\n  }\n}","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\nexport default index;\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","'use strict';\n\nfunction templatePolyfill() {\n  if ('content' in document.createElement('template')) {\n    return false;\n  }\n\n  var templates = document.getElementsByTagName('template');\n  var plateLen = templates.length;\n\n  for (var x = 0; x < plateLen; ++x) {\n    var template = templates[x];\n    var content = template.childNodes;\n    var fragment = document.createDocumentFragment();\n\n    while (content[0]) {\n      fragment.appendChild(content[0]);\n    }\n\n    template.content = fragment;\n  }\n}\n\nmodule.exports = templatePolyfill;\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export default class {\n  constructor (ctx) {\n    return {\n      pluginVar: function () {\n        return this\n      }\n    }\n  }\n}","(function (arr) {\n  arr.forEach(function (item) {\n    if (item.hasOwnProperty('after')) {\n      return;\n    }\n    Object.defineProperty(item, 'after', {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function after() {\n        var argArr = Array.prototype.slice.call(arguments),\n          docFrag = document.createDocumentFragment();\n\n        argArr.forEach(function (argItem) {\n          var isNode = argItem instanceof Node;\n          docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\n        });\n\n        this.parentNode.insertBefore(docFrag, this.nextSibling);\n      }\n    });\n  });\n})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);\n","import utils from './utils'\n\nexport default class Data {\n  constructor (data, cb) {\n    this.data = data;\n    this.cb = cb;\n    this.watchers = [];\n  }\n\n  get () {\n    return this.data\n  }\n\n  set (val) {\n    let newVal;\n    let oldVal = this.data;\n    let watcher = this.cb();\n\n    if (newVal === oldVal) {\n      return\n    }\n\n    this.data = newVal\n\n    if (watcher) {   \n      utils.nextFrame(() => watcher(newVal, oldVal));        \n    }\n  }\n}","import Utils from './utils';\n\nexport default class Descriptor {\n  constructor(value, node) {\n    this.watchers = [];\n    this.value = null;\n    this.computer = null;\n    this.node = node || null;\n\n    if (value === null) {\n      this.value = null;\n    } else {\n      switch (typeof value) {\n        case 'function':\n          this.computer = value;\n          this.value = null;\n        break;\n\n        case 'object':\n          if ('$node' in value) {\n            this.computer = value;\n            this.value = null;\n            break;\n          }\n\n          if (value instanceof Element) {\n            this.value = value;\n            break;\n          }\n\n          if ('watcher' in value) {\n            this.addWatcher(value.watcher)\n          }\n\n          if ('value' in value) {\n            if (typeof value.value === 'function') {\n              this.computer = value.value;\n              this.value = null;\n            } else {\n              this.value = value.value;\n            }\n            break;\n          }\n\n          if (this.value === null) {\n            this.value = {};\n          }\n\n          Utils.loop(value, (val, key) => {\n            Object.defineProperty(this.value, key, new Descriptor(val, this.node));\n          })\n        break;\n\n        default:\n          this.value = value;\n        break;\n      }\n    }\n\n    return {\n      get: () => {\n        if (this.computer) {\n          return this.computer.call(this, this.value);\n        }\n        return this.value;\n      },\n      set: (value) => {\n        if (this.value === value) {\n          return;\n        }\n\n        if (this.computer) {\n          this.value = this.computer.call(this, value);\n          this.update();\n          return;\n        }\n\n        if (value === null) {\n          this.value = value\n          this.update();\n          return;\n        }\n\n        if (value instanceof Element) {\n          this.value = value;\n          this.update();\n          return;\n        }\n        \n        if (typeof value === 'object') {\n          if ('$node' in value) {\n            this.value = value;\n            this.update();\n            return;\n          }\n\n          if ('watcher' in value) {\n            this.addWatcher(value.watcher);\n            if (!('value' in value)) return\n          }\n\n          if ('value' in value) {\n            this.value = value.value;\n            this.update();\n            return;\n          }\n\n          Utils.loop(value, (val, key) => {\n            if (this.value === null) {\n              this.value = {};\n            }\n            \n            if (key in this.value) {\n              this.value[key] = val;\n            } else {\n              Object.defineProperty(this.value, key, new Descriptor(val))\n            }\n          });\n        }\n\n        this.value = value;\n        this.update();\n      },\n      writeable: true,\n      enumerable: true,\n      configurable: false\n    }\n  }\n\n  update () {\n    this.watchers.forEach((watcher) => {\n      if (typeof this.value === 'function') {\n        watcher(this.value())\n      } else {\n        watcher(this.value)\n      }\n    })\n  }\n\n  addWatcher (watcher) {\n    if (Array.isArray(watcher)) {\n      this.watchers = this.watchers.concat(watcher.map((fn) => {\n          return fn.bind(this.node)\n        })\n      )\n    }\n    if (typeof watcher === 'function') {\n      this.watchers.push(watcher.bind(this.node))\n    }\n  }\n}","'use strict';\n\nexport default {\n  plugins: null,\n  head: null,\n  vdom: {}\n};","'use strict';\n\n// Polyfills\nimport './after-polyfill';\nimport templatePolyfill from 'template-polyfill';\nimport Promise from 'promise-polyfill';\n\n// Imports\nimport Vnode from './vnode';\nimport utils from './utils';\nimport global from './global';\n\nexport default class Symbiotic {\n    constructor (config) {\n        global.data = config.data || {};\n        global.methods = config.methods || {};\n        global.plugins = config.plugins || [];\n    }\n\n    attach (el) {\n        const $scope = utils.getScope(el);\n        global.head = utils.findHead($scope);\n\n        if (!'content' in document.createElement('template')) {\n            this.boostrapTemplates(global.head);\n        }\n        \n        return new Promise(function(resolve, reject) {\n            ;((start) => {\n                if (document.readyState !== 'loading') {\n                    resolve(start());\n                } else {\n                    document.addEventListener('DOMContentLoaded', () => {\n                        resolve(start());\n                    });\n                }\n            })(() => {\n                let t0 = performance.now();\n                let vnode = new Vnode($scope);\n\n                utils.init(vnode);\n\n                let t1 = performance.now();\n                console.log('Symbiote attached in ' + (t1 - t0) + ' milliseconds.');\n                return vnode\n            });\n        })\n    }\n\n    boostrapTemplates (head) {\n        const polyfillStyle = utils.createStyleNode();\n        const polyfillScript = document.createElement('script');\n        polyfillScript.innerText = 'document.createElement(\"template\")';\n        polyfillStyle.innerHTML = 'template { display: none !important};'\n        head.appendChild(polyfillStyle);\n        head.appendChild(polyfillScript);\n        templatePolyfill();\n    }\n}\n\nif (window && window.Symbiotic === undefined) {\n    window.Symbiotic = Symbiotic;\n}","'use strict';\n\nimport utils from './utils';\nimport global from './global';\nimport Observer from './observe';\nimport Data from './data';\nimport TextNode from './textNode';\n\nexport default class Model {\n    constructor ($node) {\n        this.$styleNode = utils.createStyleNode();\n        this.events = {};\n        this.style = {};\n        this.firstChild = null;\n        this.lastChild = null;\n        this.next = null;\n        this.prev = null;\n        this.cloned = {};\n        this.$node = $node;\n        this.id = $node.getAttribute('id') || utils.uid();\n        this.show = true;\n        this.textNodes = [];\n        this.width = $node.offsetWidth;\n        this.height = $node.offsetHeight;\n        this.state = 'start';\n        this.hover = false;\n        this.prevState = '';\n        this.states = {};\n        this.watchers = {};\n\n        global.vdom[this.id] = {\n            tagName: this.tagName,\n            id: this.id,\n            show: this.show,\n            nodeType: $node.nodeType,\n        }\n\n        this.model = {\n            $node: $node,\n            $event: this.$event.bind(this),\n            textNodes: this.textNodes,\n            on: this.on.bind(this),\n            emit: this.emit.bind(this),\n            append: this.append.bind(this),\n            prepend: this.prepend.bind(this),\n            find: this.find.bind(this),\n            findParent: this.findParent.bind(this),\n            // render: this.render.bind(this),\n            plugins: this.plugins.bind(this),\n            extend: this.extend.bind(this),\n            watch: this.watch.bind(this)\n        };\n\n        if (this.id !== $node.getAttribute('id')) {\n            $node.setAttribute('id', this.id);\n        }\n\n        Object.defineProperty(this.model, 'id', {\n            get: () => {\n                return this.id;\n            }\n        });\n\n        if ($node.tagName) {\n            this.tagName = $node.tagName.toLowerCase();\n\n            Object.defineProperty(this.model, 'tagName', {\n                get: () => {\n                    return this.tagName;\n                }\n            });\n        }\n\n        if (this.tagName === 'template') {\n            this.$template = utils.getTemplateNode($node);\n            this.model.$template = this.$template;\n        }\n\n        \n        Object.defineProperty(this.model, 'show', {\n            get: () => {\n                return this.show;\n            },\n            set: (val) => {\n                if (val) {\n                    if ($node.style.removeProperty) {\n                        $node.style.removeProperty('display');\n                    } else {\n                        $node.style.removeAttribute('display');\n                    }\n                } else {\n                    $node.style.display = 'none'\n                }\n                this.show = val;\n            }\n        });\n\n        Object.defineProperty(this.model, 'prev', {\n            get: () => {\n                return this.prev;\n            },\n            set: (val) => {\n                this.prev = val;\n                return this.prev;\n            }\n        });\n\n        Object.defineProperty(this.model, 'next', {\n            get: () => {\n                return this.next;\n            },\n            set: (val) => {\n                this.next = val;\n                return this.next;\n            }\n        });\n\n        Object.defineProperty(this.model, 'child', {\n            get: () => {\n                return this.firstChild;\n            },\n            set: (val) => {\n                this.firstChild = val;\n                return this.firstChild;\n            }\n        });\n\n        Object.defineProperty(this.model, 'parent', {\n            get: () => {\n                return this.parent;\n            },\n            set: (val) => {\n                this.parent = val\n                return this.parent;\n            }\n        });\n\n        Object.defineProperty(this.model, 'states', {\n            get: () => {\n                return this.states\n            },\n            set: states => {\n                this.states = states\n                this.updateState()\n            }\n        })\n\n        Object.defineProperty(this.model, 'state', {\n            get: () => {\n                return this.state\n            },\n            set: state => {\n                if (this.state !== state) {\n                    this.state = state\n                    this.updateState()\n                }\n            }\n        })\n\n        Object.defineProperty(this.model, 'style', {\n            get: () => {\n                this.updateStyles(this.style, this.$styleNode, this.id);\n                return this.style;\n            },\n            set: (val) => {\n                Object.assign(this.style, val);\n                this.updateStyles(this.style, this.$styleNode, this.id);\n                return this.style;\n            }\n        });\n\n        if ($node.tagName === 'input') {\n            Object.defineProperty(this.model, 'value', {\n                get: () => {\n                    return this.$node.value\n                },\n                set: (val) => {\n                    this.$node.value = val;\n                }\n            })\n        }\n\n        this.$node.addEventListener('mouseover', () => {\n            this.updateState('hover')\n        })\n\n        this.$node.addEventListener('mouseout', () => {\n            this.updateState()\n        })\n\n        utils.check($node.attributes, (attributes) => utils.loop(attributes, (attribute) => {\n            let attrName = utils.dashToCamelCase(attribute.nodeName);\n            let $attrValue = attribute.nodeValue;\n    \n            if (!this[attrName] && attrName !== 'id' && attrName !== 'for') {\n                this[attrName] = $attrValue;\n                global.vdom[this.id][attrName] = $attrValue;\n\n                if (~$attrValue.indexOf('${')) {\n                    $attrValue.replace(utils.mustacheRegex, (match, variable) => {\n\n                        var refs = variable.split('.');\n\n                        (function loop (obj, store, refs, index) {\n                            let key = refs[index];\n                            if (index < refs.length - 1) {\n                                obj[key] = {};\n                                store[key] = {};\n                                index++\n                                loop(obj[key], store[key], refs, index)\n                            } else {\n                                store[key] = $attrValue;\n                                Object.defineProperty(obj, key, {\n                                    get: () => {\n                                        return store[key]\n                                    },\n                                    set: (val) => {\n                                        ;(utils.debounce(($node) => {\n                                            $node.setAttribute(utils.camelCaseToDash(attrName), store[key].replace(match, val));\n                                        }))($node)\n                                    }\n                                })\n                            }\n                        })(this.model, this, refs, 0)\n                    });\n                } else {\n                    Object.defineProperty(this.model, attrName, {\n                        get: () => {\n                            return this[attrName]\n                        },\n                        set: (val) => {\n                            if (this[attrName] !== val) {\n                                this[attrName] = val;\n\n                                ;(utils.debounce(($node) => {\n                                    $node.setAttribute(utils.camelCaseToDash(attrName), this[attrName]);\n                                }))($node);\n                            }\n                        }\n                    });\n                }\n            }\n        }));\n\n        utils.check($node.childNodes, ($children) => utils.loop($children, ($child) => {\n            if ($child.nodeType === 1) {\n                let child = new Model($child);\n                child.parent = this.model;\n    \n                if (!this.lastChild) {\n                    this.firstChild = child;\n                    this.model.child = child;\n                    global.vdom[this.id].child = child.id;\n                } else {\n                    this.lastChild.next = child;\n                    child.prev = this.lastChild;\n                    global.vdom[this.lastChild.id].next = child.id;\n                }\n                this.lastChild = child;\n            }\n\n            utils.getTextNode($child, ($textNode) => {\n                this.textNodes.push(new TextNode($textNode, this.model));\n            });            \n        }));\n\n        if ($node.getAttribute('for')) {\n            var list = $node.getAttribute('for').split(' in ');\n            var key = list[0];\n            var data = list[1];\n            this.cloned = {};\n\n            Object.defineProperty(this.model, data, {\n                set: (vals) => {\n                    this[data] = vals;\n                    utils.check(vals, (vals) => {\n                        this.cloneNodes(vals, key)\n                    })\n                },\n                get: () => {\n                    return this[data]\n                }\n            })\n        }\n\n        new ResizeObserver((entries, observer) => {\n            for (const entry of entries) {\n                const { left, top, width, height } = entry.contentRect;\n                console.log(left, top, width, height)\n                this.width = width;\n                this.height = height;\n                this.top = top;\n                this.left = left;\n            }\n        }).observe(this.$node);\n\n        let pos = ['top', 'left', 'width', 'height'];\n\n        pos.forEach((p) => {\n            Object.defineProperty(this.model, p, {\n                get: () => {\n                    return this[p]\n                },\n                set: (val) => {\n                    this.style[p] = val\n                }\n            })\n        })\n\n        if (global.plugins !== null) {\n            this.plugins(global.plugins);\n        }\n                \n        return this.model;\n    }\n\n    $event(event, cb, useCapture) {\n        useCapture = useCapture || false;\n        this.$node.addEventListener(event, (e) => cb.apply(this.model, [e]), useCapture)\n    }\n\n    append ($node, methods) {\n        let node = new Model($node);\n        node.parent = this.model;\n\n        if (!this.firstChild) {\n            this.firstChild = node;\n        }\n\n        if (this.lastChild) {\n            node.prev = this.lastChild;\n            this.lastChild.next = node;\n        }\n        \n        this.lastChild = node;\n\n        (utils.debounce(() => {\n            this.$node.appendChild(node.$node);\n            utils.init(node, methods);\n        }))();\n\n        return node;\n    }\n\n    cloneNodes(vals, key) {\n        utils.debounce(() => {\n            utils.loop(vals, (val, k) => {\n                let $cloned = this.$template.children[0].cloneNode(true);\n                let cloned = this.parent.append($cloned);\n\n                if (cloned.data === key) {\n                    this.cloned[key].extend(val);\n                    this.cloned[key].textNodes.forEach((textNode) => { textNode.update() });\n                }\n\n                cloned.find(key, (node) => {\n                    (function loop(node, data) {\n\n                        utils.loop(data, (v, k) => {\n                            if (k in node) {\n                                if (typeof v !== 'object') {\n                                    node[k] = v\n                                } else {\n                                    loop(node[k], v)\n                                }\n                            } else {\n                                if (typeof node.extend === 'function') {\n                                    node.extend({ [k]: v })\n                                }\n                            }\n                        });\n                    })(node[key], val)\n                })\n            })\n        })();\n    }\n\n    emit (event, payload) {\n        let bubbles = true;\n        payload = payload || this.model;\n\n        if (this.events === undefined) {\n            this.events = {};\n        }\n\n        if (this.events[event]) {\n            for (let i = 0; i < this.events[event].length; i++) {\n                let e = this.events[event][i];\n\n                e.fn(payload);\n                bubbles = !e.bubbles ? e.bubbles : bubbles;\n            }\n        }\n\n        this.updateState(event)\n\n        if (bubbles && this.parent) {\n            this.parent.emit(event, payload);\n        }        \n    }\n\n    extend (data) {\n        const ctx = this\n        ; (function loop(model, data) {\n            utils.check(data, (data) => utils.loop(data, (value, key) => {\n                if (model[key] !== undefined) {\n                    throw 'Key on model cannot be redefined';\n                }\n\n                if (typeof value === 'function') {\n                    let Proxy = new Data(value.bind(model), () => {\n                        return ctx.watchers[key] || null\n                    });\n\n                    Object.defineProperty(model, key, {\n                        get: () => {\n                            return Proxy.get();\n                        },\n                        configurable: true\n                    })\n                } else if (typeof value === 'object') {\n                    model[key] = model[key] || {};\n                    loop(model[key], value)\n                } else {\n                    let Proxy = new Data(value, () => {\n                        return ctx.watchers[key] || null\n                    });\n\n                    Object.defineProperty(model, key, {\n                        get: () => {\n                            return Proxy.get();\n                        },\n                        set: (val) => {\n                            Proxy.set(val)\n                        },\n                        configurable: true\n                    })\n                }\n            }))\n        })(this.model, data);\n    }\n\n    find (attrName, value, cb) {\n        let result = [];\n\n        attrName = utils.dashToCamelCase(attrName);\n\n        (function dig(vnode) {\n            if (vnode) {\n                if (vnode[attrName] !== undefined && typeof value === 'function') {\n                    value(vnode);\n                    result.push(vnode);\n\n                } else if (vnode[attrName] !== undefined && vnode[attrName].split(' ').includes(value)) {\n                    if (typeof cb === 'function') {\n                        cb(vnode);\n                    }\n\n                    result.push(vnode);\n                }\n\n                \n\n                if (vnode.child) {\n                    dig(vnode.child);\n                }\n\n                if (vnode.next) {\n                    dig(vnode.next);\n                }\n            }\n\n        })(this.firstChild);\n\n        return result;\n    }\n\n    findParent (attrName, value, cb) {\n        let result = [];\n        attrName = utils.dashToCamelCase(attrName);\n\n        (function dig(vnode) {\n            if (vnode) {\n                if (vnode[attrName] !== undefined && vnode[attrName].split(' ').includes(value)) {\n                    if (typeof cb === 'function') {\n                        cb(vnode);\n                    }\n\n                    result.push(vnode);\n                }\n\n                if (vnode.parent) {\n                    dig(vnode.parent);\n                }\n            }\n\n        })(this.firstChild);\n\n        return result;\n    }\n\n    on (event, fn) {\n        event = event.split('.');\n        var name = event[0];\n        var bubbles = event[1] !== 'stop';\n\n        if (this.events === undefined) {\n            this.events = {};\n        }\n\n        if (this.events[name] === undefined) {\n            this.events[name] = [];\n        }\n\n        this.events[name].push( {fn: fn, bubbles: bubbles} );\n    }\n\n    plugins(Plugins) {\n        if (!Plugins.length > 0) {\n            return null\n        }\n\n        utils.check(Plugins, () => utils.loop(Plugins, (Plugin) => {\n            this.extend(new Plugin(this))\n        }));\n    }\n\n    prepend($node, methods) {\n        let node = new Model($node);\n        node.parent = this.model;\n\n        if (this.firstChild) {\n            node.next = this.firstChild;\n            this.firstChild.prev = node;\n        }\n\n        this.firstChild = node;\n\n        (utils.debounce(() => {\n            this.$node.prepend(node.$node);\n            utils.init(node, methods);\n        }))();\n\n        return node;\n    }\n\n    render(args) {\n        if (!args.template && this.tagName !== 'template') {\n            return\n        }\n\n        let template = args.template || this.template;\n        let data = args.data || {};\n        let methods = args.methods || global.methods;\n        let refs = template.match(/{{{?(#[a-z ]+ )?[a-z ]+.[a-z ]*}?}}/g);\n        let range = document.createRange();\n\n        utils.check(refs, (refs) => utils.loop(refs, (ref) => {\n            var key = ref.replace(/{{|}}/g, '').trim();\n            var value = utils.stringRef(key, data);\n\n            template = template.replace(ref, value);\n        }))\n\n        let frag = range.createContextualFragment(template);\n\n        return utils.check(frag.children, ($children) => utils.loop($children, ($child) => {\n            if (this.tagName === 'template') {\n                if (this.parent !== undefined) {\n                    return this.parent.append($child, methods)\n                }\n            } else {\n                return this.append($child, methods);\n            }\n\n        }));\n    }\n\n    updateState (event) {\n        event = event || null;\n        let state = null;\n        let next  = null;\n        let ctx = this;\n\n        if (!(this.state in this.states)) {\n            return\n        }\n\n        state = this.states[this.state]\n\n        if (!event) {\n            _update(state)\n            return\n        }\n\n        if (state.on === undefined) {\n            return\n        }\n\n        if (!(event in state.on)) {\n            return\n        }\n\n        if (typeof state.on[event] === 'string') {\n            this.state = state.on[event]\n            next = this.states[this.state]\n        }\n\n        if (typeof state.on[event] === 'object') {\n            next = state.on[event]\n        }\n\n        _update(next)\n\n        function _update (values) {\n            utils.loop(values, (value, key) => {\n                if (key !== 'on') {\n                    if (typeof value === 'function') {\n                        ctx.model[key] = value(global.vdom[ctx.id][key])\n                    } else {\n                        ctx.model[key] = value\n                    }\n                }\n            })\n        }\n    }\n\n    updateStyles() {\n        (utils.debounce(() => {\n            if (!utils.check(this.style)) {\n                this.$styleNode.innerHTML = ''\n                return\n            }\n\n            var styleString = `#${this.id}{`;\n\n            utils.loop(this.style, function (value, prop) {\n                styleString += `${utils.camelCaseToDash(prop)}:${value};`;\n            })\n\n            styleString += '}';\n\n            if (this.$styleNode.parentNode === null) {\n                global.head.appendChild(this.$styleNode);\n            }\n\n            this.$styleNode.innerHTML = styleString;\n        }))();\n    }\n\n    updateTextNodes (vals, key) {\n        (utils.debounce(() => {\n            utils.loop(vals, (val, k) => {\n                if (this.cloned[k] === undefined) {\n                    let $clonedNode = this.$node.content.children[0].cloneNode(true);\n                    this.cloned[k] = this.parent.append($clonedNode);\n                }\n\n                if (this.cloned[k].data && this.cloned[k].data === key) {\n                    this.cloned[k][key] = val\n\n                    this.cloned[k].textNodes.forEach((textNode) => {\n                        textNode.update();\n                    })\n                }\n\n                this.cloned[k].find('data', key, (found) => {\n                    found[key] = val\n\n                    found.textNodes.forEach((textNode) => {\n                        textNode.update()\n                    })\n                })\n            })\n        }))();\n    }\n\n    watch(watchers) {\n        Object.assign(this.watchers, watchers);\n    }\n}","'use strict';\n\nexport default class {\n\tconstructor (object, watchers) {\n\t\tconst context = this;\n\t\tcontext.watchers = watchers || [];\n\n\t\tconst handler = {\n\t\t\tget(target, property, receiver) {\n\t\t\t\ttry {\n\t\t\t\t\treturn new Proxy(target[property], handler);\n\t\t\t\t} catch (err) {\n\t\t\t\t\treturn Reflect.get(target, property, receiver);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdefineProperty(target, property, descriptor) {\n\t\t\t\tcontext.watchers.forEach(watcher => {\n\t\t\t\t\twatcher.call(null, target, property, descriptor)\n\t\t\t\t});\n\t\t\t\treturn Reflect.defineProperty(target, property, descriptor);\n\t\t\t},\n\t\t\tdeleteProperty(target, property) {\n\t\t\t\tcontext.watchers.forEach(watcher => {\n\t\t\t\t\twatcher.call(null, target, property, descriptor)\n\t\t\t\t});\n\t\t\t\treturn Reflect.deleteProperty(target, property);\n\t\t\t}\n\t\t};\n\t\n\t\treturn new Proxy(object, handler);\n\t}\n}\t","import utils from './utils';\n\nexport default class {\n  constructor ($node, model) {\n    const ctx = this;\n    this.$node = $node;\n    this.originalContent = $node.textContent;\n    this.model = model;\n    this.data = {};\n\n    this.replace((variable) => {\n      (function loop(model, refs, index) {\n        let key = refs[index];\n        if (index < refs.length - 1) {\n          model[key] = {};\n          index++\n          loop(model[key], refs, index)\n        } else {\n          Object.defineProperty(model, key, {\n            get: () => {\n              return ctx.data\n            },\n            set: (val) => {\n              ctx.data = val\n              ;(utils.debounce(() => {\n                ctx.update()\n              }))();\n            },\n            configurable: true\n          })\n        }\n      })(this.model, variable.split('.'), 0)\n\n      return utils.stringRef(variable, model);\n    })  \n  }\n\n  replace (cb) {\n    this.$node.textContent = this.originalContent.replace(utils.mustacheRegex, (match, variable) => {\n      return cb(variable);\n    });\n  }\n\n  update () {\n    this.replace((variable) => {\n      return utils.stringRef(variable, this.model);\n    })\n  }\n}","'use strict';\n\nimport Model from './model';\nimport global from './global';\n\nexport default {\n    id: 0,\n    prefix: 'vnom-',\n    mustacheRegex: /\\${\\s*([\\w\\.]+)\\s*}/g,\n    camelCaseToDash: function (myStr) {\n        return myStr.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    },\n    dashToCamelCase: function (myString) {\n        return myString.replace(/-([a-z])/g, function (g) {\n            return g[1].toUpperCase();\n        });\n    },\n    createStyleNode: function () {\n        let styleNode = document.createElement('style');\n\n        styleNode.type = 'text/css';\n\n        return styleNode;\n    },\n    uid: function () {\n        return this.prefix + this.id++;\n    },\n    debounce: function (func) {\n        var frame = null;\n\n        return function executedFunction() {\n            let context = this;\n            let args = arguments;\n\n            if (frame !== null) window.cancelAnimationFrame(frame);\n\n            frame = window.requestAnimationFrame(() => {\n                func.apply(context, args);\n            })\n        }\n    },\n    nextFrame: function (fn) {\n        var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n        requestAnimationFrame(() => {\n            fn()\n        });\n    },\n    isNode: function (o) {\n        return typeof Node === \"object\" ? o instanceof Node : o && typeof o === \"object\" && typeof o.nodeType === \"number\" && typeof o.nodeName===\"string\"\n    },\n    check (item, cb) {\n        if (item === null) {\n            return false\n        }\n        \n        if (item === undefined) {\n            return false\n        }\n\n        switch (typeof item) {\n            case 'array':\n                if (item.length === 0) {\n                    return false\n                }\n                break;\n            case 'object':\n                if (!this.isNode(item)) {\n                    if (Object.keys(item).length === 0) {\n                        return false\n                    }\n                }\n                break;\n            case 'string':\n                if (item === '') {\n                    return false\n                }\n                break;\n        }\n\n        if (typeof cb === 'function') {\n            return cb.apply(null, [item]);\n        }\n\n        return true;\n    },\n    loop (object, cb) {\n        let length = object.length;\n        let result = [];\n\n        if (length > 0) {\n            for (let i=0; i < length; i++) {\n                let res = cb.apply(null, [object[i], i, length]);\n                if (res) {\n                    result.push(res)\n                }\n            }\n        } else {\n            for (let key in object) {\n                let res = cb.apply(null, [object[key], key]);\n                if (res) {\n                    result.push();\n                }\n            }\n        }\n        return result;\n    },\n    getTextNode ($child, cb) {\n        if ($child.nodeType === 3) {\n            if ($child.nodeValue.trim().length > 0 ) {\n                return cb($child)\n            }\n        }\n    },\n    getTemplateNode ($node, cb) {\n        if ($node.tagName === 'TEMPLATE') {\n            if (typeof cb === 'function') {\n                return cb.apply(null, [$node.content]);\n            }\n            return $node.content;\n        }\n     },\n    stringRef (ref, object) {\n        return ref.split('.').reduce((object,i) => {\n            if (object) {\n                if (object[i]) {\n                    return object[i]\n                } else {\n                    return null\n                }\n            }\n        }, object);\n    },\n    init (vnom, methods) {\n        methods = methods || global.methods;\n\n        if (typeof methods === 'function') {\n            methods.apply(vnom);\n            return\n        }\n\n        for (let method in methods) {\n            let attribute = '';\n            let attributeValue = '';\n\n            switch (method.charAt(0)) {\n                case '.':\n                    attribute = 'class';\n                    attributeValue = method.substring(1);\n                    break;\n                case '#':\n                    attribute = 'id';\n                    attributeValue = method.substring(1);\n                    break;\n                default:\n                    attribute = 'tagName'\n                    attributeValue = method;\n            }\n\n            if (vnom[attribute]) {\n                if (vnom[attribute].split(' ').indexOf(attributeValue) > -1) {\n\n                    let obj = methods[method];\n\n                    vnom.setStates(methods[method]);\n\n                    vnom.state = 'start';\n\n                    // if (!vnom.methods) {\n                    //     vnom.methods = {};\n                    // }\n\n                    // if (vnom.methods[method] === undefined) {\n                    //     vnom.methods[method] = methods[method].bind(vnom);\n                    // }\n                }\n            }\n        }\n\n        // if (vnom.firstChild) {\n        //     this.init(vnom.firstChild, methods)\n        // }\n\n        // if (vnom.next) {\n        //     this.init(vnom.next, methods)\n        // }\n\n        // for (let method in vnom.methods) {\n        //     try {\n        //         (vnom.methods[method])();\n        //     } catch (error) {\n        //         console.error(error.stack);\n        //     }\n        // }\n    },\n    getScope (el) {\n        if (el === undefined) {\n            return document.body || document.querySelector('body');\n        }\n    \n        switch (typeof el) {\n            case 'string':\n                return document.querySelector(el);\n            case 'object':\n                return el;            \n        }\n    },\n    findHead ($node) {     \n        if ($node.tagName === 'HTML') {\n            return $node.querySelector('head')\n        } else {\n            return this.findHead($node.parentNode);\n        }\n    }\n};","import Vnom from './vnom';\nimport Utils from './utils';\nimport TextNode from './textNode';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport Descriptor from './descriptor';\nimport Vtext from './vtext';\nimport { ENETDOWN } from 'constants';\n\n\nexport default class Vnode {\n  constructor($node) {\n    const states = {};\n    var stateName = null;\n\n    Vnode.prototype.setStates = function (newStates) {\n      if ('data' in newStates) {\n        this.extend(newStates.data);\n      }\n\n      if ('methods' in newStates) {\n        for (let methodKey in newStates.methods) {\n          this[methodKey] = newStates.methods[methodKey];\n        }\n      }\n\n      Object.assign(states, newStates)\n    }\n\n    Vnode.prototype.getState = function (state) {\n      if (state in states) {\n        return states[state]\n      }\n      return {}\n    }\n\n    Object.defineProperty(this, 'state', {\n      get: () => {\n        return stateName\n      },\n      set: (newStateName) => {\n        let oldState = this.getState(stateName);\n        let newState = this.getState(newStateName);\n        stateName = newStateName;\n\n        if ('leave' in oldState) {\n          oldState.leave.apply(this);\n        }\n\n        if ('enter' in newState) {\n          newState.enter.apply(this);\n        }\n\n        if ('props' in newState) {\n          Utils.loop(newState.props, (prop, key) => {\n            this[key] = prop;\n          })\n        }\n\n        if ('on' in newState) {\n          Utils.loop(newState.on, (res, event) => {\n            let fn = typeof res === 'function' ? res : () => { return this.state = res };\n            if (event.charAt(0) === '$') {\n              this.$on(event)\n            }\n          })\n        }\n\n        if ('ready' in newState) {\n          newState.ready.apply(this)\n        }\n      }\n    })\n\n    this.extend(new Vnom($node));\n\n    Utils.check($node.childNodes, ($children) => Utils.loop($children, ($child) => {\n      if ($child.nodeType === 1) {\n        let child = new Vnode($child);\n        child.parent = this;\n\n        if (this.lastChild) {\n          this.lastChild.next = child;\n          child.prev = this.lastChild;\n        } else {\n          this.firstChild = child;\n        }\n\n        this.lastChild = child\n      }\n\n      if ($child.nodeType === 3) {\n        if ($child.nodeValue.match(Utils.mustacheRegex)) {\n          this.extend(new Vtext($child));\n        }\n      }\n    }));\n  }\n\n  $on(event) {\n    let $event = event.substring(1);\n    let useCapture = false;\n\n    this.$node.addEventListener($event, (e) => {\n      let state = this.getState(this.state);\n\n      if ('on' in state) {\n        let events = state.on\n        if (event in events) {\n          let fn = typeof events[event] === 'function' ? events[event] : function () { this.state = events[event] };\n          fn.call(this, e)\n        }\n      }\n      \n    }, useCapture)\n  }\n\n  append ($node, methods) {\n    let node = new Vnode($node);\n    node.parent = this;\n\n    if (!this.firstChild) {\n      this.firstChild = node;\n    }\n\n    if (this.lastChild) {\n      node.prev = this.lastChild;\n      this.lastChild.next = node;\n    }\n\n    this.lastChild = node;\n\n    Utils.nextFrame(() => {\n      this.$node.appendChild(node.$node);\n      Utils.init(node, methods);\n    });\n\n    return node;\n  }\n\n  emit(event, payload) {\n    let state = this.getState(this.state);\n    let bubbles = true;\n    payload = payload || this;\n    \n    if ('on' in state) {\n      let events = state.on;\n      if (event in events) {\n        let fn = typeof events[event] === 'function' ? events[event] : function () { this.state = events[event] };\n        fn.apply(this)\n      }\n    }\n\n    // if (this.events === undefined) {\n    //   this.events = {};\n    // }\n\n    // if (this.events[event]) {\n    //   for (let i = 0; i < this.events[event].length; i++) {\n    //     let e = this.events[event][i];\n\n    //     e.fn(payload);\n    //     bubbles = !e.bubbles ? e.bubbles : bubbles;\n    //   }\n    // }\n\n    // if (bubbles && this.parent) {\n    //   this.parent.emit(event, payload);\n    // }\n  }\n\n  extend (data) {\n    Utils.check(data, (data) => Utils.loop(data, (value, key) => {\n      if (key in this) {\n        this[key] = value\n      } else {\n        Object.defineProperty(this, key, new Descriptor(value, this))\n      }\n    }));\n  }\n\n  find (attrName, value, cb) {\n    let result = [];\n\n    attrName = utils.dashToCamelCase(attrName);\n\n    (function dig(vnode) {\n      if (vnode) {\n        if (vnode[attrName] !== undefined && typeof value === 'function') {\n          value(vnode);\n          result.push(vnode);\n\n        } else if (vnode[attrName] !== undefined && vnode[attrName].split(' ').includes(value)) {\n          if (typeof cb === 'function') {\n            cb(vnode);\n          }\n\n          result.push(vnode);\n        }\n\n        if (vnode.firstChild) {\n          dig(vnode.firstChild);\n        }\n\n        if (vnode.next) {\n          dig(vnode.next);\n        }\n      }\n\n    })(this.firstChild);\n\n    return result;\n  }\n\n  findParent (attrName, value, cb) {\n    let result = [];\n    attrName = utils.dashToCamelCase(attrName);\n\n    (function dig(vnode) {\n      if (vnode) {\n        if (vnode[attrName] !== undefined && vnode[attrName].split(' ').includes(value)) {\n          if (typeof cb === 'function') {\n            cb(vnode);\n          }\n\n          result.push(vnode);\n        }\n\n        if (vnode.parent) {\n          dig(vnode.parent);\n        }\n      }\n\n    })(this.firstChild);\n\n    return result;\n  }\n\n  on (event, fn) {\n    let eventName\n    var state = this.getState(this.state);\n\n\n\n    // event = event.split('.');\n    // var name = event[0];\n    // var bubbles = event[1] !== 'stop';\n\n    // if (this.events === undefined) {\n    //   this.events = {};\n    // }\n\n    // if (this.events[name] === undefined) {\n    //   this.events[name] = [];\n    // }\n\n    // this.events[name].push({ fn: fn, bubbles: bubbles });\n  }\n\n  plugins (Plugins) {\n    if (!Plugins.length > 0) {\n      return null\n    }\n\n    utils.check(Plugins, () => utils.loop(Plugins, (Plugin) => {\n      this.extend(new Plugin(this))\n    }));\n  }\n\n  prepend ($node, methods) {\n    let node = new Model($node);\n    node.parent = this.model;\n\n    if (this.firstChild) {\n      node.next = this.firstChild;\n      this.firstChild.prev = node;\n    }\n\n    this.firstChild = node;\n\n    (utils.debounce(() => {\n      this.$node.prepend(node.$node);\n      utils.init(node, methods);\n    }))();\n\n    return node;\n  }\n}","import Descriptor from './descriptor';\nimport Global from './global';\nimport Utils from './utils';\nimport Vtext from './vtext'\nimport Vstyle from './vstyle'\nimport ResizeObserver from 'resize-observer-polyfill';\n\nexport default class Vnom {\n  constructor($node) {\n    const props = {};\n    const id = $node.getAttribute('id') || Utils.uid();\n\n    if ($node.id !== id) {\n      $node.id = id;\n    }\n    \n    props.id = {\n      value: id,\n      watcher: function () {\n        throw 'Cannot change id of ' + this;\n      }\n    }\n\n    props.$node = {\n      value: $node,\n      watcher: function () {\n        throw 'Cannnot change the node of ' + this;\n      }\n    }\n\n    props.tagName = {\n      value: $node.tagName.toLowerCase(),\n      watcher: function () {\n        throw 'Cannot change node type of ' + this;\n      }\n    }\n\n    props.show = {\n      value: $node.style.display === 'block',\n      watcher: function (show) {\n        if (show) {\n          if ($node.style.removeProperty) {\n            $node.style.removeProperty('display');\n          } else {\n            $node.style.removeAttribute('display');\n          }\n        } else {\n          $node.style.display = 'none'\n        }\n      }\n    }\n\n    props.class = {\n      value: $node.getAttribute('class'),\n      watcher: function (newVal) {\n        Utils.nextFrame(() => $node.setAttribute('class', newVal))\n      }\n    }\n\n    props.parent = null;\n    props.firstChild = null;\n    props.lastChild = null;\n    props.next = null;\n    props.prev = null;\n\n    Utils.check($node.attributes, (attributes) => Utils.loop(attributes, (attribute) => {\n      let attrName = Utils.dashToCamelCase(attribute.nodeName);\n      let $attrValue = attribute.nodeValue;\n\n      if (!attrName in props && attrName !== 'for') {\n        props[attrName] = {\n          value: $attrValue,\n          watcher: function (newVal) {\n            Utils.nextFrame(() => $node.setAttribute(Utils.camelCaseToDash(attrName), attrValue));\n          }\n        }\n      }\n    }));\n\n    props.style = new Vstyle(id)\n    \n    return props\n  }\n}","import Utils from './utils';\nimport Descriptor from './descriptor';\nimport Global from './global';\n\nexport default class {\n  constructor (id) {\n    const $styleNode = Utils.createStyleNode();\n    const updateStyles = Utils.debounce(function (styles) {\n      updateStyleNode(styles)\n    })\n\n    return {\n      value: function (values) {\n        if (!values) {\n          updateStyles(this.value);\n          return this.value || {};\n        }\n\n        return values\n      },\n      watcher: function (vals) {\n        Utils.nextFrame(() => updateStyleNode(vals))\n      }\n    };\n\n    function updateStyleNode (styles) {\n      if (!Utils.check(styles)) {\n        $styleNode.innerHTML = ''\n        return\n      }\n\n      var styleString = `#${id}{`;\n\n      Utils.loop(styles, function (value, prop) {\n        styleString += `${Utils.camelCaseToDash(prop)}:${value};`;\n      })\n\n      styleString += '}';\n\n      if ($styleNode.parentNode === null) {\n        Global.head.appendChild($styleNode);\n      }\n\n      $styleNode.innerHTML = styleString;\n    }\n  }\n}","import Utils from './utils';\nimport Descriptor from './descriptor';\n\nexport default class {\n  constructor($node) {\n    const $originalContent = $node.textContent;\n    const props = {};\n    const refs = $originalContent.match(Utils.mustacheRegex).map((match) => {\n        return match.match(/[\\w\\.]+/)[0]\n      }).filter((value, index, self) => {\n        return self.indexOf(value) === index;\n      });\n\n    const contents = $node.textContent.split(Utils.mustacheRegex);\n\n    var $lastNode = $node;\n\n    Utils.loop(contents, (content) => {\n      $node.textContent = '';\n      var index = refs.indexOf(content);\n      var $newNode = document.createTextNode('');\n\n      if (index > -1) {\n        let ref = refs[index];\n\n        (function loop(object, refs, index) {\n          let key = refs[index];\n          index++;\n          object[key] = object[key] || {};\n\n          if (index < refs.length) {\n            loop(object[key], refs, index);\n            return object;\n          } else {\n            if (!object[key].watcher) {\n              object[key].watcher = [];\n            }\n            object[key].watcher.push(function (newVal) {\n              $newNode.textContent = newVal\n            });\n          }\n        })(props, ref.split('.'), 0);\n      } else {\n        $newNode.textContent = content\n      }\n\n      $lastNode.after($newNode);\n      $lastNode = $newNode;\n    });\n    \n    return props;\n\n    function replace($node, $originalContent, object, cb) {\n      $node.textContent = $originalContent.replace(Utils.mustacheRegex, (match, variable) => {\n        return cb(variable, object);\n      });\n    }\n  }\n}"],"sourceRoot":""}